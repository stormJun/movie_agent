# 代码走读（v3 strict）

本文件只覆盖 v3 strict 的主链路：Router-Worker 编排 + RAG 检索 + SSE 流式生成。历史版本的详细走读已归档到：

- `docs/99-参考资料/历史文档/深入理解/代码走读_旧版含缓存.md`

## 1. 主入口

- FastAPI：`backend/server/main.py`
- API 路由：`backend/server/api/rest/v1/`

## 2. Chat 主链路（非流式）

- Handler：`backend/application/chat/handlers/chat_handler.py`
- 路由：`backend/infrastructure/routing/orchestrator/router_graph.py`
- 执行：`backend/infrastructure/rag/`

## 3. Chat 主链路（SSE 流式）

- API：`backend/server/api/rest/v1/chat_stream.py`
- 事件模型：`backend/server/models/stream_events.py`
- 执行器：`backend/infrastructure/streaming/chat_stream_executor.py`

## 4. Core（检索侧）

- Agent：`backend/graphrag_agent/agents/`（retrieve-only）
- 搜索：`backend/graphrag_agent/search/`
- 图构建/索引：`backend/graphrag_agent/graph/`

